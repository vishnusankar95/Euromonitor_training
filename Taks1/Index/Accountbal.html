<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css" />
    <style>
        #withdrow_div{
            display: none;
        }

        #new_data{
            display: none;
        }

        #deposite_div{
            display: none;
        }
    </style>
</head>
<body>

    <div>
        <div>
            <h2>Hi <h3 id="name"></h3></h2>
               <div>
                   <button onclick="withdrow()">Withdrow Money</button>
                   <div id="withdrow_div">
                         <input type="number" id="withdraw_val">
                         <button onclick="check_withdrow()">Withdrow</button>
                   </div>
                   <button onclick="deposite()">Deposite Money</button>
                   <div id="deposite_div">
                    <input type="number" id="deposite_val">
                    <button onclick="check_deposite()">Deposite</button>
              </div>
               </div>
        </div>
        <div id="new_data">
        <div class="acc_data_formatter">
            <div class="splitter1">
              <span class="acc_dtls">Account holder Name </span>
              <span id="acc_name"></span>
            </div>
            <div class="splitter1">
              <span class="acc_dtls">Account Number </span>
              <span id="acc_num"></span>
            </div>
            <div class="splitter1">
              <span class="acc_dtls">Account Balence </span>       
              <span id="acc_bal_sav"></span>
            </div>
            </div>
            <div class="splitter1">
              <span class="acc_dtls">Email Id </span>
              <span id="acc_email"></span>
            </div>
        </div>
            <div>
    </div>
    
</body>

<script>
    let data = JSON.parse(localStorage.getItem("userdata"));
    console.log("next page :", data);
    let name = data.name;
    let accNum = data.acc_num;
    let age = data.yb;
    let dob = data.age;
    let aclocation = data.location;
    let state = data.state;
    let country = data.country;
    let email = data.email;
    let savings_depo = data.deposit;
    let account_type = data.acc_type;
  
    let d = new Date( dob )
    year = d.getFullYear();
      month = d.getMonth();
      day = d.getDate();
  
    //console.log("name is :", name)
    //document.getElementById("name").innerHTML = name;
    // document.getElementById("acc_num").innerHTML = accNum;
    // document.getElementById("acc_age").innerHTML = age;
    // document.getElementById("acc_dob").innerHTML = day+"-"+month+"-"+year;
    // document.getElementById("acc_location").innerHTML = aclocation;
    // document.getElementById("acc_state").innerHTML = state;
    // document.getElementById("acc_country").innerHTML = country;
    // document.getElementById("acc_email").innerHTML = email;
    // document.getElementById("acc_bal_sav").innerHTML = savings_depo;
    // document.getElementById("acc_bal_cur").innerHTML = curret_depo;
    
   function withdrow(){
    var selectType = document.getElementById("withdrow_div");
    if(selectType.style.display == 'none')
    selectType.style.display = 'block'
    else
    selectType.style.display = 'none'
   }

   function deposite(){
    var selectType = document.getElementById("deposite_div");
    if(selectType.style.display == 'none')
    selectType.style.display = 'block'
    else
    selectType.style.display = 'none'
   }

   function check_withdrow(){
       let val = document.getElementById("withdraw_val").value;
       //console.log("val ", val)
       if(val == ""){
           alert("Type the amount to withdrow")
       }
       else{
        if( account_type == "savings"){
            //console.log(123)
           let new_bal = checkout_sav_withdrawel(val)
           var new_data = document.getElementById("new_data");
           document.getElementById("acc_name").innerHTML = name;    
           document.getElementById("acc_num").innerHTML = accNum;
           document.getElementById("acc_email").innerHTML = email;
           document.getElementById("acc_bal_sav").innerHTML = new_bal;
           datasave(new_bal)

           new_data.style.display = 'block'
        }
        else if(account_type == "current"){

            let new_bal = checkout_cur_withdrawel(val)
            //console.log(new_bal)
           var new_data = document.getElementById("new_data");
           console.log(name)
           document.getElementById("acc_name").innerHTML = name;    
           document.getElementById("acc_num").innerHTML = accNum;
           document.getElementById("acc_email").innerHTML = email;
           document.getElementById("acc_bal_sav").innerHTML = new_bal;
           new_data.style.display = 'block'

        }
       }

      
   }

   function check_deposite(){
       let val = document.getElementById("deposite_val").value;
       //console.log("val ", val)
       if(val == ""){
           alert("Type the amount to Deposite")
       }
       else{
        if( account_type == "savings"){
           
           let new_bal = Number(savings_depo) +Number(val);
           console.log("new ", new_bal)
           var new_data = document.getElementById("new_data");
           document.getElementById("acc_name").innerHTML = name;    
           document.getElementById("acc_num").innerHTML = accNum;
           document.getElementById("acc_email").innerHTML = email;
           document.getElementById("acc_bal_sav").innerHTML = new_bal;
           

           new_data.style.display = 'block'
        }
        else if(account_type == "current"){

            let new_bal = Number(savings_depo) +Number(val);
           var new_data = document.getElementById("new_data");
           console.log(name)
           document.getElementById("acc_name").innerHTML = name;    
           document.getElementById("acc_num").innerHTML = accNum;
           document.getElementById("acc_email").innerHTML = email;
           document.getElementById("acc_bal_sav").innerHTML = new_bal;
           new_data.style.display = 'block'
        }
       }

      
   }

   function  checkout_sav_withdrawel(val){
       if(val > savings_depo){
           alert("you cannot withdraw the amount due to insufficient balance")
       }else{
           let new_bal = savings_depo - val;
           return new_bal;       
       }
   }

   function  checkout_cur_withdrawel(val){
       if(val > savings_depo){
           alert("that Balance is less and u need to use OverDraft")
       }else{
           let new_bal = savings_depo - val;
          
           return new_bal;       
       }
   }
   
  </script>
  
</html>